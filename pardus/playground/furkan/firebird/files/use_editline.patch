--- configure.in	2006-04-25 20:07:23.000000000 +0300
+++ configure.in.new	2006-12-12 22:49:50.000000000 +0200
@@ -420,8 +420,11 @@
 AC_CHECK_LIB(dl, main)
 AC_CHECK_LIB(c, main)
 AC_CHECK_LIB(m, main)
-AC_CHECK_LIB(curses, main)
-dnl AC_CHECK_LIB(termcap, main)
+AC_CHECK_LIB(termcap, tgetent, , \
+  AC_CHECK_LIB(tinfo, tgetent, , \
+    AC_CHECK_LIB(curses, tgetent, , \
+      AC_CHECK_LIB(ncurses, tgetent, , \
+        AC_MSG_ERROR(termcap support not found)))))
 if test "$EDITLINE_FLG" = "Y"; then
   AC_SUBST(EDITLINE_A, -leditline)
 fi
