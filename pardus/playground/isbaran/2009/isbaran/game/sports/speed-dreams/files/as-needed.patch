--- configure.in.orig	2010-01-15 13:20:51.730508921 +0200
+++ configure.in	2010-01-15 13:20:06.955509483 +0200
@@ -123,8 +123,7 @@
 AC_CHECK_LIB(Xrandr, XRRQueryVersion,,AC_MSG_ERROR([Can't find libXrandr. Please check config.log and if you can't solve the problem send the file to speed-dreams-users@lists.sourceforge.net with the subject \"Speed Dreams compilation problem\"]))
 AC_CHECK_LIB(openal, alEnable,, AC_MSG_ERROR([Can't find AL/al.h. OpenAL can be found on http://www.openal.org/]))
 AC_CHECK_LIB(alut, alutLoadWAVFile,
-	LDFLAGS="$LDFLAGS -lalut",
-	LDFLAGS="$LDFLAGS")
+LIBS="$LIBS -lalut", )
 
 AC_CHECK_LIB(dl, dlopen)
 AC_CHECK_FUNC(dlopen,,AC_MSG_ERROR([Can't find dlopen function. Please check config.log and if you can't solve the problem send the file to speed-dreams-users@lists.sourceforge.net with the subject \"Speed Dreams compilation problem\"]))
--- Make-default.mk.orig	2010-01-15 13:21:43.275509003 +0200
+++ Make-default.mk	2010-01-15 13:24:40.496259155 +0200
@@ -402,7 +402,7 @@
 ifdef PROGRAM
 
 ${PROGRAM}: ${OBJECTS} $(subst -l,${EXPORTBASE}/lib/lib, ${LIBS:=.a})
-	${CXX} ${OBJECTS} ${LDFLAGS} ${LIBS} ${SOLIBS} ${EXT_LIBS} -o $@
+	${CXX} ${CXXFLAGS} ${LDFLAGS} -o $@ ${OBJECTS} ${SOLIBS} ${LIBS} ${EXT_LIBS}
 
 installprogram: ${PROGRAM}
 	@ createdir="${INSTLIBBASE}" ; \
@@ -420,14 +420,14 @@
 ifdef LOCALTOOLS
 
 ${LOCALTOOLS}: ${OBJECTS} $(subst -l,${EXPORTBASE}/lib/lib, ${LIBS:=.a})
-	${CXX} ${OBJECTS} ${LDFLAGS} ${LIBS} ${EXT_LIBS} ${SOLIBS} -o $@
+	${CXX} ${CXXFLAGS} ${LDFLAGS} -o $@ ${OBJECTS} ${SOLIBS} ${LIBS} ${EXT_LIBS}
 
 endif
 
 ifdef TOOLS
 
 ${TOOLS}: ${OBJECTS} $(subst -l,${EXPORTBASE}/lib/lib, ${LIBS:=.a})
-	${CXX} ${OBJECTS} ${LDFLAGS} ${LIBS} ${EXT_LIBS} ${SOLIBS} -o $@
+	${CXX} ${CXXFLAGS} ${LDFLAGS} -o $@ ${OBJECTS} ${SOLIBS} ${LIBS} ${EXT_LIBS}
 
 installtools: ${TOOLS}
 	@createdir="${INSTBINBASE}/${TOOLSDIR}" ; \
@@ -478,7 +478,7 @@
 ifdef SOLIBRARY
 
 ${SOLIBRARY}: ${OBJECTS}
-	${CXX} -shared -o ${SOLIBRARY} ${OBJECTS} ${LDFLAGS} ${LIBSPATH} ${LIBS} ${DEBUG_LIBS}
+	${CXX} ${CXXFLAGS} ${LDFLAGS} -shared -o ${SOLIBRARY} ${OBJECTS} ${SOLIBS} ${LIBS} ${EXT_LIBS}
 	@D=`pwd` ; \
 	createdir="${EXPORTBASE}/lib" ; \
 	$(mkinstalldirs) $$createdir ; \
@@ -509,7 +509,7 @@
 ifdef MODULE
 
 ${MODULE}: ${OBJECTS}
-	${CXX} -shared -o ${MODULE} ${OBJECTS} ${LDFLAGS} ${LIBSPATH} ${LIBS} 
+	${CXX} ${CXXFLAGS} ${LDFLAGS} -shared -o ${MODULE} ${OBJECTS} ${SOLIBS} ${LIBS} ${EXT_LIBS}
 	@D=`pwd` ; \
 	createdir="${EXPORTBASE}/${MODULEDIR}" ; \
 	$(mkinstalldirs) $$createdir ; \
--- src/libs/client/Makefile.orig	2010-01-15 13:25:47.818257381 +0200
+++ src/libs/client/Makefile	2010-01-15 13:25:57.661259294 +0200
@@ -22,6 +22,8 @@
 
 SOURCES   = entry.cpp splash.cpp mainmenu.cpp exitmenu.cpp optionmenu.cpp creditsmenu.cpp
 
+SOLIBS    = -lconfscreens -lraceengine
+
 LIBS      =  -lplibssg -lplibsg -lplibul
 
 EXPDIR    = include
--- src/libs/Makefile.orig	2010-01-15 13:26:38.665509447 +0200
+++ src/libs/Makefile	2010-01-15 13:27:09.954258357 +0200
@@ -23,7 +23,7 @@
 
 TOOLSUBDIRS	= txml
 
-SUBDIRS		= confscreens racescreens robottools txml tgf tgfclient client raceengineclient learning \
+SUBDIRS		= confscreens racescreens robottools txml tgf tgfclient raceengineclient client learning \
 			  portability math
 
 PKGSUBDIRS	= $(SUBDIRS)
--- src/libs/raceengineclient/Makefile.orig	2010-01-15 13:27:47.612508923 +0200
+++ src/libs/raceengineclient/Makefile	2010-01-15 13:28:11.122270239 +0200
@@ -23,6 +23,8 @@
 SOURCES      = singleplayer.cpp raceinit.cpp racemain.cpp racemanmenu.cpp racestate.cpp racegl.cpp \
 	       raceengine.cpp raceresults.cpp
 
+SOLIBS       = -lconfscreens -lrobottools -lracescreens
+
 EXPDIR       = include
 
 EXPORTS      = singleplayer.h raceinit.h
--- src/libs/tgf/Makefile.orig	2010-01-15 13:28:48.195506052 +0200
+++ src/libs/tgf/Makefile	2010-01-15 13:29:08.025508864 +0200
@@ -30,6 +30,7 @@
 		hash.cpp \
 		modinfo.cpp
 
+SOLIBS  = -ltxml
 
 EXPDIR  = include
 
