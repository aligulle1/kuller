--- src/libs/txml/xmltok_impl.c.orig	2010-01-15 13:31:30.262506151 +0200
+++ src/libs/txml/xmltok_impl.c	2010-01-15 13:32:16.869257060 +0200
@@ -1615,7 +1615,7 @@
 			    const char *end,
 			    POSITION *pos)
 {
-  while (ptr != end) {
+    while (ptr < end) {
     switch (BYTE_TYPE(enc, ptr)) {
 #define LEAD_CASE(n) \
     case BT_LEAD ## n: \
