Index: mozilla/security/nss/lib/nss/nssinit.c
===================================================================
--- mozilla.orig/security/nss/lib/nss/nssinit.c
+++ mozilla/security/nss/lib/nss/nssinit.c
@@ -667,16 +667,20 @@ nss_Init(const char *configdir, const ch
 	passwordRequired = pk11_password_required;
     }
 
-    /* we always try to initialize the modules */
-    rv = nss_InitModules(configdir, certPrefix, keyPrefix, secmodName, 
+    /* Skip the module init if we are already initted and we are trying
+     * to init with not noCertDB and noModDB */
+    if (!(isReallyInitted && noCertDB && noModDB)) {
+	/* we always try to initialize the modules */
+	rv = nss_InitModules(configdir, certPrefix, keyPrefix, secmodName, 
 		updateDir, updCertPrefix, updKeyPrefix, updateID, 
 		updateName, configName, configStrings, passwordRequired,
 		readOnly, noCertDB, noModDB, forceOpen, optimizeSpace, 
 		(initContextPtr != NULL));
 
     if (rv != SECSuccess) {
-	goto loser;
+        goto loser;
     }
+     }
 
 
     /* finish up initialization */
