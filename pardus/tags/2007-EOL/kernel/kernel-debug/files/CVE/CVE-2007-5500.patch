Index: pardus-2.6/kernel/exit.c
===================================================================
--- pardus-2.6.orig/kernel/exit.c
+++ pardus-2.6/kernel/exit.c
@@ -1287,8 +1287,7 @@ static int wait_task_stopped(struct task
 		int why = (p->ptrace & PT_PTRACED) ? CLD_TRAPPED : CLD_STOPPED;
 
 		exit_code = p->exit_code;
-		if (unlikely(!exit_code) ||
-		    unlikely(p->state & TASK_TRACED))
+		if (unlikely(!exit_code) || unlikely(p->exit_state))
 			goto bail_ref;
 		return wait_noreap_copyout(p, pid, uid,
 					   why, (exit_code << 8) | 0x7f,
