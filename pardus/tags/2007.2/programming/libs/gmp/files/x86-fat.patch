Index: mpn/generic/addsub_n.c
===================================================================
RCS file: /home/cvsfiles/gmp42/mpn/generic/addsub_n.c,v
retrieving revision 1.1
retrieving revision 1.2
diff -p -2 -r1.1 -r1.2
*** mpn/generic/addsub_n.c	14 Mar 2006 15:57:54 -0000	1.1
--- mpn/generic/addsub_n.c	15 May 2006 22:38:42 -0000	1.2
***************
*** 1,5 ****
  /* mpn_addsub_n -- Add and Subtract two limb vectors of equal, non-zero length.
  
! Copyright 1999, 2000, 2001 Free Software Foundation, Inc.
  
  This file is part of the GNU MP Library.
--- 1,5 ----
  /* mpn_addsub_n -- Add and Subtract two limb vectors of equal, non-zero length.
  
! Copyright 1999, 2000, 2001, 2006 Free Software Foundation, Inc.
  
  This file is part of the GNU MP Library.
*************** mpn_addsub_n (mp_ptr r1p, mp_ptr r2p, mp
*** 59,63 ****
  	{
  	  this_n = MIN (n - off, PART_SIZE);
! #if HAVE_NATIVE_mpn_add_nc || !HAVE_NATIVE_mpn_add_n
  	  acyo = mpn_add_nc (r1p + off, s1p + off, s2p + off, this_n, acyo);
  #else
--- 59,63 ----
  	{
  	  this_n = MIN (n - off, PART_SIZE);
! #if HAVE_NATIVE_mpn_add_nc
  	  acyo = mpn_add_nc (r1p + off, s1p + off, s2p + off, this_n, acyo);
  #else
*************** mpn_addsub_n (mp_ptr r1p, mp_ptr r2p, mp
*** 65,69 ****
  	  acyo = acyn + mpn_add_1 (r1p + off, r1p + off, this_n, acyo);
  #endif
! #if HAVE_NATIVE_mpn_sub_nc || !HAVE_NATIVE_mpn_sub_n
  	  scyo = mpn_sub_nc (r2p + off, s1p + off, s2p + off, this_n, scyo);
  #else
--- 65,69 ----
  	  acyo = acyn + mpn_add_1 (r1p + off, r1p + off, this_n, acyo);
  #endif
! #if HAVE_NATIVE_mpn_sub_nc
  	  scyo = mpn_sub_nc (r2p + off, s1p + off, s2p + off, this_n, scyo);
  #else
*************** mpn_addsub_n (mp_ptr r1p, mp_ptr r2p, mp
*** 82,86 ****
  	{
  	  this_n = MIN (n - off, PART_SIZE);
! #if HAVE_NATIVE_mpn_sub_nc || !HAVE_NATIVE_mpn_sub_n
  	  scyo = mpn_sub_nc (r2p + off, s1p + off, s2p + off, this_n, scyo);
  #else
--- 82,86 ----
  	{
  	  this_n = MIN (n - off, PART_SIZE);
! #if HAVE_NATIVE_mpn_sub_nc
  	  scyo = mpn_sub_nc (r2p + off, s1p + off, s2p + off, this_n, scyo);
  #else
*************** mpn_addsub_n (mp_ptr r1p, mp_ptr r2p, mp
*** 88,92 ****
  	  scyo = scyn + mpn_sub_1 (r2p + off, r2p + off, this_n, scyo);
  #endif
! #if HAVE_NATIVE_mpn_add_nc || !HAVE_NATIVE_mpn_add_n
  	  acyo = mpn_add_nc (r1p + off, s1p + off, s2p + off, this_n, acyo);
  #else
--- 88,92 ----
  	  scyo = scyn + mpn_sub_1 (r2p + off, r2p + off, this_n, scyo);
  #endif
! #if HAVE_NATIVE_mpn_add_nc
  	  acyo = mpn_add_nc (r1p + off, s1p + off, s2p + off, this_n, acyo);
  #else
*************** mpn_addsub_n (mp_ptr r1p, mp_ptr r2p, mp
*** 98,102 ****
    else
      {
!       /* r1 and r2 are identical to s1 and s2 (r1==s1 and r2=s2 or vice versa)
  	 Need temporary storage.  */
        mp_limb_t tp[PART_SIZE];
--- 98,102 ----
    else
      {
!       /* r1 and r2 are identical to s1 and s2 (r1==s1 and r2==s2 or vice versa)
  	 Need temporary storage.  */
        mp_limb_t tp[PART_SIZE];
*************** mpn_addsub_n (mp_ptr r1p, mp_ptr r2p, mp
*** 106,110 ****
  	{
  	  this_n = MIN (n - off, PART_SIZE);
! #if HAVE_NATIVE_mpn_add_nc || !HAVE_NATIVE_mpn_add_n
  	  acyo = mpn_add_nc (tp, s1p + off, s2p + off, this_n, acyo);
  #else
--- 106,110 ----
  	{
  	  this_n = MIN (n - off, PART_SIZE);
! #if HAVE_NATIVE_mpn_add_nc
  	  acyo = mpn_add_nc (tp, s1p + off, s2p + off, this_n, acyo);
  #else
*************** mpn_addsub_n (mp_ptr r1p, mp_ptr r2p, mp
*** 112,116 ****
  	  acyo = acyn + mpn_add_1 (tp, tp, this_n, acyo);
  #endif
! #if HAVE_NATIVE_mpn_sub_nc || !HAVE_NATIVE_mpn_sub_n
  	  scyo = mpn_sub_nc (r2p + off, s1p + off, s2p + off, this_n, scyo);
  #else
--- 112,116 ----
  	  acyo = acyn + mpn_add_1 (tp, tp, this_n, acyo);
  #endif
! #if HAVE_NATIVE_mpn_sub_nc
  	  scyo = mpn_sub_nc (r2p + off, s1p + off, s2p + off, this_n, scyo);
  #else
Index: configure
===================================================================
RCS file: /home/cvsfiles/gmp42/configure,v
retrieving revision 1.13
retrieving revision 1.14
diff -p -2 -r1.13 -r1.14
*** configure	12 May 2006 16:00:27 -0000	1.13
--- configure	17 May 2006 10:27:28 -0000	1.14
***************
*** 1,4 ****
  #! /bin/sh
! # From configure.in Revision: 1.13 .
  # Guess values for system-dependent variables and create Makefiles.
  # Generated by GNU Autoconf 2.59 for GNU MP 4.2.1.
--- 1,4 ----
  #! /bin/sh
! # From configure.in Revision: 1.14 .
  # Guess values for system-dependent variables and create Makefiles.
  # Generated by GNU Autoconf 2.59 for GNU MP 4.2.1.
*************** echo "include_mpn(\`sparc32/sparc-defs.m
*** 3555,3560 ****
      esac
  
!     # If the user asked for a fat build, override the path set above
      if test $enable_fat = yes; then
        extra_functions="$extra_functions fat fat_entry"
        path="x86/fat x86"
--- 3555,3562 ----
      esac
  
!     # If the user asked for a fat build, override the path and flags set above
      if test $enable_fat = yes; then
+       gcc_cflags_cpu=""
+       gcc_cflags_arch=""
        extra_functions="$extra_functions fat fat_entry"
        path="x86/fat x86"
*************** ia64-*-hpux*)
*** 10285,10289 ****
  *-*-irix6*)
    # Find out which ABI we are using.
!   echo '#line 10287 "configure"' > conftest.$ac_ext
    if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
    (eval $ac_compile) 2>&5
--- 10287,10291 ----
  *-*-irix6*)
    # Find out which ABI we are using.
!   echo '#line 10289 "configure"' > conftest.$ac_ext
    if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
    (eval $ac_compile) 2>&5
*************** else
*** 11730,11738 ****
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:11732: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:11736: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
--- 11732,11740 ----
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:11734: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:11738: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
*************** else
*** 11963,11971 ****
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:11965: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:11969: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
--- 11965,11973 ----
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:11967: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:11971: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
*************** else
*** 12023,12031 ****
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:12025: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>out/conftest.err)
     ac_status=$?
     cat out/conftest.err >&5
!    echo "$as_me:12029: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s out/conftest2.$ac_objext
     then
--- 12025,12033 ----
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:12027: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>out/conftest.err)
     ac_status=$?
     cat out/conftest.err >&5
!    echo "$as_me:12031: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s out/conftest2.$ac_objext
     then
*************** else
*** 14207,14211 ****
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 14209 "configure"
  #include "confdefs.h"
  
--- 14209,14213 ----
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 14211 "configure"
  #include "confdefs.h"
  
*************** else
*** 14305,14309 ****
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 14307 "configure"
  #include "confdefs.h"
  
--- 14307,14311 ----
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 14309 "configure"
  #include "confdefs.h"
  
*************** else
*** 16484,16492 ****
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:16486: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:16490: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
--- 16486,16494 ----
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:16488: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:16492: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
*************** else
*** 16544,16552 ****
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:16546: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>out/conftest.err)
     ac_status=$?
     cat out/conftest.err >&5
!    echo "$as_me:16550: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s out/conftest2.$ac_objext
     then
--- 16546,16554 ----
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:16548: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>out/conftest.err)
     ac_status=$?
     cat out/conftest.err >&5
!    echo "$as_me:16552: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s out/conftest2.$ac_objext
     then
*************** else
*** 17905,17909 ****
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 17907 "configure"
  #include "confdefs.h"
  
--- 17907,17911 ----
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 17909 "configure"
  #include "confdefs.h"
  
*************** else
*** 18003,18007 ****
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 18005 "configure"
  #include "confdefs.h"
  
--- 18005,18009 ----
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 18007 "configure"
  #include "confdefs.h"
  
*************** else
*** 18830,18838 ****
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:18832: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:18836: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
--- 18832,18840 ----
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:18834: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:18838: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
*************** else
*** 18890,18898 ****
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:18892: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>out/conftest.err)
     ac_status=$?
     cat out/conftest.err >&5
!    echo "$as_me:18896: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s out/conftest2.$ac_objext
     then
--- 18892,18900 ----
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:18894: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>out/conftest.err)
     ac_status=$?
     cat out/conftest.err >&5
!    echo "$as_me:18898: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s out/conftest2.$ac_objext
     then
*************** else
*** 20924,20932 ****
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:20926: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:20930: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
--- 20926,20934 ----
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:20928: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:20932: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
*************** else
*** 21157,21165 ****
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:21159: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:21163: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
--- 21159,21167 ----
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:21161: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:21165: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
*************** else
*** 21217,21225 ****
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:21219: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>out/conftest.err)
     ac_status=$?
     cat out/conftest.err >&5
!    echo "$as_me:21223: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s out/conftest2.$ac_objext
     then
--- 21219,21227 ----
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:21221: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>out/conftest.err)
     ac_status=$?
     cat out/conftest.err >&5
!    echo "$as_me:21225: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s out/conftest2.$ac_objext
     then
*************** else
*** 23401,23405 ****
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 23403 "configure"
  #include "confdefs.h"
  
--- 23403,23407 ----
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 23405 "configure"
  #include "confdefs.h"
  
*************** else
*** 23499,23503 ****
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 23501 "configure"
  #include "confdefs.h"
  
--- 23501,23505 ----
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 23503 "configure"
  #include "confdefs.h"
  
