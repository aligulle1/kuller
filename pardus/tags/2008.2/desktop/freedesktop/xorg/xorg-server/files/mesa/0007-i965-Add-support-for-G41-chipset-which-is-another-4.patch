From 052eef31b612f2ac1f7c812fc06b688e83a10fbc Mon Sep 17 00:00:00 2001
From: Xiang, Haihao <haihao.xiang@intel.com>
Date: Fri, 12 Sep 2008 09:39:41 +0800
Subject: [PATCH] i965: Add support for G41 chipset which is another 4 series chipset.

---
 src/mesa/drivers/dri/i965/brw_defines.h   |    3 ++-
 src/mesa/drivers/dri/i965/intel_context.h |    1 +
 2 files changed, 3 insertions(+), 1 deletions(-)

diff --git Mesa-7.0.4/src/mesa/drivers/dri/i965/brw_defines.h Mesa-7.0.4/src/mesa/drivers/dri/i965/brw_defines.h
index 018da89..01a01f0 100644
--- Mesa-7.0.4/src/mesa/drivers/dri/i965/brw_defines.h
+++ Mesa-7.0.4/src/mesa/drivers/dri/i965/brw_defines.h
@@ -853,7 +853,8 @@
 #define BRW_IS_GM45(brw)                ((brw)->intel.intelScreen->deviceID == PCI_CHIP_GM45_GM)
 #define BRW_IS_G4X(brw)                 (((brw)->intel.intelScreen->deviceID == PCI_CHIP_IGD_E_G) || \
                                          ((brw)->intel.intelScreen->deviceID == PCI_CHIP_G45_G) || \
-                                         ((brw)->intel.intelScreen->deviceID == PCI_CHIP_Q45_G))
+                                         ((brw)->intel.intelScreen->deviceID == PCI_CHIP_Q45_G) || \
+                                         ((brw)->intel.intelScreen->deviceID == PCI_CHIP_G41_G))
 #define CMD_PIPELINE_SELECT(brw)       ((BRW_IS_GM45(brw) || BRW_IS_G4X(brw)) ? CMD_PIPELINE_SELECT_GM45 : CMD_PIPELINE_SELECT_965)
 #define CMD_VF_STATISTICS(brw)         ((BRW_IS_GM45(brw) || BRW_IS_G4X(brw)) ? CMD_VF_STATISTICS_GM45 : CMD_VF_STATISTICS_965)
 #define URB_SIZES(brw)                 ((BRW_IS_GM45(brw) || BRW_IS_G4X(brw)) ? 384 : 256)  /* 512 bit unit */
diff --git Mesa-7.0.4/src/mesa/drivers/dri/i965/intel_context.h Mesa-7.0.4/src/mesa/drivers/dri/i965/intel_context.h
index 76ee119..ce9246a 100644
--- Mesa-7.0.4/src/mesa/drivers/dri/i965/intel_context.h
+++ Mesa-7.0.4/src/mesa/drivers/dri/i965/intel_context.h
@@ -390,6 +390,7 @@ extern int INTEL_DEBUG;
 #define PCI_CHIP_IGD_E_G                0x2E02
 #define PCI_CHIP_Q45_G                  0x2E12
 #define PCI_CHIP_G45_G                  0x2E22
+#define PCI_CHIP_G41_G                  0x2E32
 
 /* ================================================================
  * intel_context.c:
-- 
1.6.0.2

