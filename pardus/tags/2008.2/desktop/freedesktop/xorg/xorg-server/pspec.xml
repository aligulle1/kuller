<?xml version="1.0" ?>
<!DOCTYPE PISI SYSTEM "http://www.pardus.org.tr/projeler/pisi/pisi-spec.dtd">
<PISI>
    <Source>
        <Name>xorg-server</Name>
        <Homepage>http://x.org/</Homepage>
        <Packager>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Packager>
        <License>xorg-server</License>
        <IsA>app:console</IsA>
        <IsA>app:gui</IsA>
        <Summary>XOrg X Server</Summary>
        <Description>xorg-server contains the X Server, the main application that allows a graphical interface.</Description>
        <Archive sha1sum="055d8630d4db0661ab827a2c0a660ae8c716cb7e" type="tarbz2">http://cekirdek.pardus.org.tr/~fatih/distfiles/xorg-server-7.3.tar.bz2</Archive>
        <BuildDependencies>
            <Dependency>libdrm</Dependency>
            <Dependency>xkeyboard-config</Dependency>
            <Dependency versionFrom="7.3">xorg-app</Dependency>
            <Dependency versionFrom="7.3">xorg-util</Dependency>
            <Dependency>xorg-font</Dependency>
            <Dependency>pixman</Dependency>
            <Dependency>hal</Dependency>
        </BuildDependencies>
        <Patches>
            <Patch>edid-quirks.patch</Patch>
            <Patch level="1">export.patch</Patch>

            <!-- install needed headers -->
            <Patch level="1">xorg-server-1.1.1-install-libxf86config-headers.patch</Patch>

            <!-- Server servives acpid restarts -->
            <Patch level="1">xorg_acpi.patch</Patch>

            <!-- Use our paths -->
            <Patch level="1">mesa/mesa-config.patch</Patch>
            <Patch level="1">mesa/915-texture-crossbar.patch</Patch>

            <!-- Mesa upstream patches -->
            <Patch>mesa/0001-mesa-fix-float-blend-bug.patch</Patch>
            <Patch>mesa/0002-added-_mesa_get_uniformiv-to-mesa.def.patch</Patch>
            <Patch>mesa/0003-mesa-bump-MAX_INSN-to-350.patch</Patch>
            <Patch>mesa/0004-fix-BUFFER_DEPTH-BUFFER_ACCUM-mix-up.patch</Patch>
            <Patch>mesa/0005-mesa-improved-gl_buffer_object-reference-counting.patch</Patch>
            <Patch>mesa/0006-mesa-replace-MALLOC-w-CALLOC-to-fix-memory-error-i.patch</Patch>
            <Patch>mesa/0007-i965-Add-support-for-G41-chipset-which-is-another-4.patch</Patch>

            <Patch>fedora/xserver-1.5.0-bad-fbdev-thats-mine.patch</Patch>
            <Patch>fedora/xserver-1.5.0-xaa-sucks.patch</Patch>

            <Patch>suse/randr1_1-sig11.diff</Patch>
            <Patch>suse/fix-dpi-values.diff</Patch>

            <Patch level="1">ubuntu/001_ubuntu_add_extra_modelines_from_xorg.patch</Patch>
            <Patch level="1">ubuntu/10_dont_look_in_home_for_config.diff</Patch>
            <Patch level="1">ubuntu/16_only_switch_vt_when_active.diff</Patch>
            <Patch>ubuntu/41_vbe_filter_less.diff</Patch>
            <Patch>ubuntu/43_allow_override_BIOS_EDID_preferred_mode.diff</Patch>
            <Patch>ubuntu/44_preferredmode_infinite_loop.diff</Patch>
            <Patch>ubuntu/45_only_XF86_APM_CAPABILITY_CHANGED_for_video_change_acpi_events.diff</Patch>
            <Patch level="1">ubuntu/002_ubuntu_sharevts_load_cpu.patch</Patch>
            <Patch level="1">ubuntu/004_fedora_init_origins_fix.patch</Patch>
            <Patch level="1">ubuntu/008_fedora_gl_include_inferiors.patch</Patch>
            <Patch>ubuntu/103_fedora_openchrome.patch</Patch>
            <Patch>ubuntu/107_fedora_dont_backfill_bg_none.patch</Patch>
            <Patch>ubuntu/144_fedora_xserver-1.3.0-xnest-exposures.patch</Patch>
            <Patch>ubuntu/151_x86emu_handle_cpuid.patch</Patch>
            <Patch>ubuntu/160_default_to_intel.diff</Patch>

            <!-- http://www.bughost.org/pipermail/power/2007-October/001107.html -->
            <Patch>less-wakeups.patch</Patch>

            <Patch>config/0001-Config-Fix-a-memory-leak.patch</Patch>
            <Patch>config/0002-Config-Don-t-forget-to-add-xkb_rules-option.patch</Patch>
            <Patch>config/0004-config-add-a-debug-message-fix-a-whitespace-error.patch</Patch>
            <Patch>config/0005-config-only-shutdown-libhal-if-the-connection-is-va.patch</Patch>
            <Patch>config/0006-Support-to-pass-arbitrary-options-via-HAL-hotpluggin.patch</Patch>

            <Patch>upstream/0001-Xi-ChangeDeviceControl-presence-events-should-set-t.patch</Patch>
            <Patch>upstream/0002-Fix-potential-crasher-in-xf86CrtcRotate.patch</Patch>

            <!-- Enable PIC for libxf86config -->
            <Patch>xserver-1.4.99-pic-libxf86config.patch</Patch>
        </Patches>
    </Source>

    <Package>
        <Name>xorg-server</Name>
        <RuntimeDependencies>
            <Dependency>libdrm</Dependency>
            <Dependency>xkeyboard-config</Dependency>
            <Dependency versionFrom="7.3">xorg-app</Dependency>
            <Dependency>xorg-font</Dependency>
            <Dependency>libdmx</Dependency>
            <Dependency>pixman</Dependency>
            <Dependency>hal</Dependency>
            <Dependency>jimmac-xcursor</Dependency>
            <Dependency>dejavu-fonts</Dependency>
        </RuntimeDependencies>
        <Conflicts>
            <Package>xorg</Package>
        </Conflicts>
        <Files>
            <Path fileType="config">/etc</Path>
            <Path fileType="executable">/usr/bin</Path>
            <Path fileType="header">/usr/include</Path>
            <Path fileType="library">/usr/lib</Path>
            <Path fileType="library">/usr/libexec</Path>
            <Path fileType="data">/usr/share/X11</Path>
            <Path fileType="man">/usr/share/man</Path>
            <Path fileType="data">/usr/share/cursors</Path>
            <Path fileType="data">/usr/share/aclocal</Path>
            <Path fileType="data">/var/lib/xkb</Path>
        </Files>
        <AdditionalFiles>
            <AdditionalFile owner="root" permission="0644" target="/usr/lib/xorg/std/lib/libGL.la">lib/libGL.la</AdditionalFile>
            <AdditionalFile owner="root" permission="0644" target="/usr/lib/libGLU.la">lib/libGLU.la</AdditionalFile>
            <AdditionalFile owner="root" permission="0644" target="/etc/env.d/10xorg">10xorg</AdditionalFile>
        </AdditionalFiles>
        <Provides>
            <COMAR script="package.py">System.Package</COMAR>
        </Provides>
    </Package>

    <History>
        <Update release="48">
            <Date>2008-09-19</Date>
            <Version>7.3</Version>
            <Comment>Use symbolic links for libdri.so as it is also provided by the new ati-drivers</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="47">
            <Date>2008-09-19</Date>
            <Version>7.3</Version>
            <Comment>Sync Mesa with stable branch</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="46">
            <Date>2008-08-25</Date>
            <Version>7.3</Version>
            <Comment>Bump to Mesa 7.0.4. Grab xserver stable branch patches.</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="45">
            <Date>2008-07-22</Date>
            <Version>7.3</Version>
            <Comment>Drop AIGLX patches as they are not necessary for new server and they cause some performance issues</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="44">
            <Date>2008-07-05</Date>
            <Version>7.3</Version>
            <Comment>Update edid quirks patch for more DPI fixes</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="43">
            <Date>2008-06-26</Date>
            <Version>7.3</Version>
            <Comment>Make mode checking more tolerant like in pre-RandR times</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="42" type="security">
            <Date>2008-06-12</Date>
            <Version>7.3</Version>
            <Comment>Bump xorg-server to 1.4.2 which fixes fixes CVE-2008-{1377,1379,2360,2361,2362}</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="41">
            <Date>2008-06-10</Date>
            <Version>7.3</Version>
            <Comment>Bump xorg server to latest stable (1.4.1).</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="40">
            <Date>2008-04-27</Date>
            <Version>7.3</Version>
            <Comment>Support to pass arbitrary options via HAL hotplugging.</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="39">
            <Date>2008-04-14</Date>
            <Version>7.3</Version>
            <Comment>Really disable XAA offscreen pixmaps.</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="38">
            <Date>2008-04-13</Date>
            <Version>7.3</Version>
            <Comment>Bump Mesa to 7.0.3, add lots of fixes including one for the new intel driver to work with some cards.</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="37">
            <Date>2008-03-26</Date>
            <Version>7.3</Version>
            <Comment>Add missing xorg-app dependency.</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="36">
            <Date>2008-03-23</Date>
            <Version>7.3</Version>
            <Comment>Switch also libGL.la file dynamically as nvidia driver has a .la file.</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="35">
            <Date>2008-03-22</Date>
            <Version>7.3</Version>
            <Comment>Create libGL symlinks if needed. Apply cherry-picked EDID patches from 1.5 branch.</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="34">
            <Date>2008-03-03</Date>
            <Version>7.3</Version>
            <Comment>Sync with server-1.4-branch, add some patches from Ubuntu and bump Mesa to 7.0.3-rc2</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="33">
            <Date>2008-01-30</Date>
            <Version>7.3</Version>
            <Comment>xorg-data dependency replaced with xkeyboard-config</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="32">
            <Date>2008-01-21</Date>
            <Version>7.3</Version>
            <Comment>Get synaptics options from HAL and fix some leaks</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="31" type="security">
            <Date>2008-01-19</Date>
            <Version>7.3</Version>
            <Comment>Fix regressions due to CVE-2007-6429 fix</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="30" type="security">
            <Date>2008-01-17</Date>
            <Version>7.3</Version>
            <Comment>Fix CVE-2007-{5760,5958,6427,6428,6429}</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="29">
            <Date>2007-12-28</Date>
            <Version>7.3</Version>
            <Comment>Use /var/lib/xkb for compiled maps + some package fixes</Comment>
            <Name>Fatih Aşıcı</Name>
            <Email>fatih@pardus.org.tr</Email>
        </Update>
        <Update release="28">
            <Date>2007-12-14</Date>
            <Version>7.3</Version>
            <Comment>Bump to xorg-server-1.4.0.90 and Mesa-7.0.2</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="27">
            <Date>2007-09-17</Date>
            <Version>7.3</Version>
            <Comment>Bump to xorg-server-1.4</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="26">
            <Date>2007-08-08</Date>
            <Version>7.2</Version>
            <Comment>Bump to Mesa-7.0.1</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="25">
            <Date>2007-06-24</Date>
            <Version>7.2</Version>
            <Comment>Bump to Mesa-7.0</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="24">
            <Date>2007-06-22</Date>
            <Version>7.2</Version>
            <Comment>Bump to Mesa-7.0rc1</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="23" type="security">
            <Date>2007-05-02</Date>
            <Version>7.2</Version>
            <Comment>Fix CVE-2007-2437</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="22">
            <Date>2007-04-29</Date>
            <Version>7.2</Version>
            <Comment>Bump to Mesa-6.5.3</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="21">
            <Date>2007-04-25</Date>
            <Version>7.2</Version>
            <Comment>Bump to Mesa-6.5.3rc4</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="20">
            <Date>2007-04-22</Date>
            <Version>7.2</Version>
            <Comment>Bump to Mesa-6.5.3rc2</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="19">
            <Date>2007-04-20</Date>
            <Version>7.2</Version>
            <Comment>Bump to Server13Branch which includes randr1.2 and EXA damage track (xserver 1.3 Final)</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="18">
            <Date>2007-04-06</Date>
            <Version>7.2</Version>
            <Comment>Bump to Server13Branch which includes randr1.2 and EXA damage track (xserver 1.3 RC5)</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="17" type="security">
            <Date>2007-04-04</Date>
            <Version>7.2</Version>
            <Comment>Fix CVE-2007-1003</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="16">
            <Date>2007-03-27</Date>
            <Version>7.2</Version>
            <Comment>Bump to Server13Branch which includes randr1.2 and EXA damage track (xserver 1.3 RC3)</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="15">
            <Date>2007-03-14</Date>
            <Version>7.2</Version>
            <Comment>Bump to Server13Branch which includes randr1.2 and EXA damage track (xserver 1.3 RC2)</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="14">
            <Date>2007-03-05</Date>
            <Version>7.2</Version>
            <Comment>Bump to Server13Branch which includes randr1.2 and EXA damage track (xserver 1.3 RC1)</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="13">
            <Date>2007-01-23</Date>
            <Version>7.2</Version>
            <Comment>Version bump</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="12" type="security">
            <Date>2007-01-09</Date>
            <Version>7.2_rc3</Version>
            <Comment>Fix multiple integer overflows in dbe and render extensions, CVE-2006-6101 CVE-2006-6102 CVE-2006-6103</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="11">
            <Date>2006-12-18</Date>
            <Version>7.2_rc3</Version>
            <Comment>Grab real fix for i945GM problem from xorg-git-tree, use SUSE's patch to enable fglrx until its next release</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="10">
            <Date>2006-12-08</Date>
            <Version>7.2_rc3</Version>
            <Comment>Fixes i945GM problems, thanks to Gabriel C</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="9">
            <Date>2006-12-08</Date>
            <Version>7.2_rc3</Version>
            <Comment>Version bump</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="8">
            <Date>2006-11-03</Date>
            <Version>7.1</Version>
            <Comment>Fix #3904</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="7">
            <Date>2006-11-01</Date>
            <Version>7.1</Version>
            <Comment>Move opengl-update to zorg</Comment>
            <Name>Onur Küçük</Name>
            <Email>onur@pardus.org.tr</Email>
        </Update>
        <Update release="6">
            <Date>2006-10-21</Date>
            <Version>7.1</Version>
            <Comment>fix #3807</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="5">
            <Date>2006-10-19</Date>
            <Version>7.1</Version>
            <Comment>Add zorg dependency</Comment>
            <Name>Onur Küçük</Name>
            <Email>onur@pardus.org.tr</Email>
        </Update>
        <Update release="4">
            <Date>2006-10-13</Date>
            <Version>7.1</Version>
            <Comment>fix libGL.* issues</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="3">
            <Date>2006-10-12</Date>
            <Version>7.1</Version>
            <Comment>liveCD workarounds</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="2">
            <Date>2006-10-12</Date>
            <Version>7.1</Version>
            <Comment>Add GLX texture crossbar support</Comment>
            <Name>Onur Küçük</Name>
            <Email>onur@pardus.org.tr</Email>
        </Update>
        <Update release="1">
            <Date>2006-09-19</Date>
            <Version>7.1</Version>
            <Comment>First release.</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
    </History>
</PISI>
