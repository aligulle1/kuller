From: David Schleef <ds@bigkitten.com>
Date: Mon, 17 Mar 2008 01:58:49 +0000 (-0700)
Subject: Check n==0 case.
X-Git-Url: http://gitweb.freedesktop.org/?p=liboil.git;a=commitdiff;h=ba4855b50c5b840e88b330362e9d094810427315

Check n==0 case.
---

--- a/liboil/amd64/wavelet.c
+++ b/liboil/amd64/wavelet.c
@@ -1770,6 +1770,7 @@ lshift_s16_mmx(int16_t *d1, int16_t *s1,
     n--;
   }
   n >>= 2;
+  if (n == 0) return;
   __asm__ __volatile__ ("\n"
       "  movzwl 0(%[s3_1]), %%ecx\n"
       "  movd %%ecx, %%mm1\n"
@@ -1800,6 +1801,7 @@ lshift_s16_mmx_2(int16_t *d1, int16_t *s
     n--;
   }
   n >>= 3;
+  if (n == 0) return;
   __asm__ __volatile__ ("\n"
       "  movzwl 0(%[s3_1]), %%ecx\n"
       "  movd %%ecx, %%mm1\n"

