<?xml version="1.0" ?>
<!DOCTYPE PISI SYSTEM "http://www.pardus.org.tr/projeler/pisi/pisi-spec.dtd">
<PISI>
    <Source>
        <Name>samba</Name>
        <Homepage>http://www.samba.org/</Homepage>
        <Packager>
            <Name>Ekin Meroğlu</Name>
            <Email>ekin@pardus.org.tr</Email>
        </Packager>
        <License>GPLv2</License>
        <IsA>service</IsA>
        <Summary>A suite of SMB and CIFS client/server programs for UNIX</Summary>
        <Description>Samba is a free software implementation of Microsoft's networking protocol released under the GNU General Public License. As of version 3, Samba not only provides file and print services for various Microsoft Windows clients but can also integrate with a Windows Server domain, either as a Primary Domain Controller (PDC) or as a Domain Member. It can also be part of an Active Directory domain.</Description>
        <Archive sha1sum="609c602d9a17ea05954fc9fc021cfd95227eaefb" type="targz">http://us1.samba.org/samba/ftp/stable/samba-3.0.30.tar.gz</Archive>
        <BuildDependencies>
            <Dependency>popt</Dependency>
            <Dependency>acl</Dependency>
            <Dependency>cups</Dependency>
            <Dependency>pam</Dependency>
            <Dependency>python</Dependency>
            <Dependency>readline</Dependency>
            <Dependency>libxml2</Dependency>
            <Dependency>zlib</Dependency>
            <Dependency releaseFrom="9">openldap-client</Dependency>
            <Dependency releaseFrom="5">mit-kerberos</Dependency>
            <Dependency>libaio</Dependency>
            <Dependency>dmapi</Dependency>
            <Dependency>libcap</Dependency>
        </BuildDependencies>
        <Patches>
            <Patch>002_all_samba-3.0.x-smbumount-uid32.patch</Patch>
            <Patch>autoconf_circular_borkbork.patch</Patch>

            <!-- Ubuntu/Debian patches -->
            <Patch level="1">documentation.patch</Patch>
            <Patch level="1">smbpasswd-syslog.patch</Patch>

            <!-- Gentoo patches -->
            <Patch level="1">3.0.26a-invalid-free-fix.patch</Patch>
            <Patch level="1">3.0.26a-lazyldflags.patch</Patch>
            <Patch level="1">3.0.28-fix_broken_readdir_detection.patch</Patch>
            <Patch level="1">3.0.28-libcap_detection.patch</Patch>
        </Patches>
    </Source>

    <Package>
        <Name>samba</Name>
        <RuntimeDependencies>
            <Dependency>acl</Dependency>
            <Dependency>cups</Dependency>
            <Dependency>libxml2</Dependency>
            <Dependency releaseFrom="9">openldap-client</Dependency>
            <Dependency>mit-kerberos</Dependency>
            <Dependency>libaio</Dependency>
            <Dependency>dmapi</Dependency>
            <Dependency>libcap</Dependency>
            <Dependency releaseFrom="17">comar-api</Dependency>
        </RuntimeDependencies>
        <Conflicts>
            <Package>samba-python</Package>
        </Conflicts>
        <Files>
            <Path fileType="config">/etc</Path>
            <Path fileType="library">/lib/security</Path>
            <Path fileType="executable">/sbin</Path>
            <Path fileType="executable">/usr/bin</Path>
            <Path fileType="header">/usr/include</Path>
            <Path fileType="library">/usr/lib</Path>
            <Path fileType="executable">/usr/sbin</Path>
            <Path fileType="man">/usr/share/man</Path>
            <Path fileType="data">/var/cache/samba</Path>
            <Path fileType="data">/var/lib</Path>
            <Path fileType="data">/var/log</Path>
            <Path fileType="data">/var/run</Path>
        </Files>
        <AdditionalFiles>
            <AdditionalFile owner="root" permission="0644" target="/etc/samba/smbusers">smbusers</AdditionalFile>
            <AdditionalFile owner="root" permission="0644" target="/etc/samba/smb.conf">smb.conf</AdditionalFile>
            <AdditionalFile owner="root" permission="0644" target="/etc/samba/lmhosts">lmhosts</AdditionalFile>
            <AdditionalFile owner="root" permission="0644" target="/etc/samba/system-auth-winbind">system-auth-winbind</AdditionalFile>
            <AdditionalFile owner="root" permission="0644" target="/etc/pam.d/samba">samba.pam</AdditionalFile>
            <AdditionalFile owner="root" permission="0644" target="/etc/conf.d/samba">samba.confd</AdditionalFile>
        </AdditionalFiles>
        <Provides>
            <COMAR script="package.py">System.Package</COMAR>
            <COMAR script="service.py">System.Service</COMAR>
        </Provides>
    </Package>

    <History>
        <Update release="34" type="security">
            <Date>2008-06-05</Date>
            <Version>3.0.30</Version>
            <Comment>Version bump to bugfix release, CVE-2008-1105 is also merged</Comment>
            <Name>Gökçen Eraslan</Name>
            <Email>gokcen@pardus.org.tr</Email>
        </Update>
        <Update release="33" type="security">
            <Date>2008-05-28</Date>
            <Version>3.0.28a</Version>
            <Comment>Add patch to fix CVE-2008-1105</Comment>
            <Name>Eren Türkay</Name>
            <Email>turkay.eren@gmail.com</Email>
        </Update>
        <Update release="32">
            <Date>2008-03-23</Date>
            <Version>3.0.28a</Version>
            <Comment>Version bump to bugfix release</Comment>
            <Name>Gökçen Eraslan</Name>
            <Email>gokcen@pardus.org.tr</Email>
        </Update>
        <Update release="31" type="security">
            <Date>2007-12-10</Date>
            <Version>3.0.28</Version>
            <Comment>Stable update to fix CVE-2007-6015</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="30" type="security">
            <Date>2007-12-04</Date>
            <Version>3.0.27a</Version>
            <Comment>Stable update to fix the regression fix for CVE-2007-4572</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="29" type="security">
            <Date>2007-11-17</Date>
            <Version>3.0.27</Version>
            <Comment>Fix a regression introduced by the fix for CVE-2007-4572</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="28" type="security">
            <Date>2007-11-15</Date>
            <Version>3.0.27</Version>
            <Comment>Stable update to fix CVE-2007-4572 and CVE-2007-5398</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="27">
            <Date>2007-11-05</Date>
            <Version>3.0.26a</Version>
            <Comment>Stable update and enable DNS updates</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="26">
            <Date>2007-09-12</Date>
            <Version>3.0.26</Version>
            <Comment>Stable update</Comment>
            <Name>Alper Somuncu</Name>
            <Email>alpersomuncu@gmail.com</Email>
        </Update>
        <Update release="25" type="security">
            <Date>2007-09-11</Date>
            <Version>3.0.25c</Version>
            <Comment>Fix CVE-2007-4138</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="24">
            <Date>2007-08-21</Date>
            <Version>3.0.25c</Version>
            <Comment>Stable update</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="23">
            <Date>2007-06-27</Date>
            <Version>3.0.25b</Version>
            <Comment>Stable update</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="22">
            <Date>2007-05-27</Date>
            <Version>3.0.25a</Version>
            <Comment>Service script updated.</Comment>
            <Name>Bahadır Kandemir</Name>
            <Email>bahadir@pardus.org.tr</Email>
        </Update>
        <Update release="21">
            <Date>2007-05-26</Date>
            <Version>3.0.25a</Version>
            <Comment>Important bugfix release</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="20" type="security">
            <Date>2007-05-14</Date>
            <Version>3.0.25</Version>
            <Comment>Stable update to fix CVE-2007-2444, CVE-2007-2446 and CVE-2007-2447</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="19">
            <Date>2007-03-30</Date>
            <Version>3.0.24</Version>
            <Comment>Add missing depecies (cyrus-sasl, libcap)</Comment>
            <Name>Ekin Meroğlu</Name>
            <Email>ekin@pardus.org.tr</Email>
        </Update>
        <Update release="18">
            <Date>2007-02-10</Date>
            <Version>3.0.24</Version>
            <Comment>Add dmapi dependency for XFS ACL support</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="17">
            <Date>2007-02-05</Date>
            <Version>3.0.24</Version>
            <Comment>Add missing libaio dep</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="16" type="security">
            <Date>2007-02-05</Date>
            <Version>3.0.24</Version>
            <Comment>Stable update to fix CVE-2007-045{2,3,4}</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="15">
            <Date>2007-01-15</Date>
            <Version>3.0.23_p4</Version>
            <Comment>Stable update</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="14">
            <Date>2006-11-28</Date>
            <Version>3.0.23_p3</Version>
            <Comment>Use pythonmodules</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="13">
            <Date>2006-10-15</Date>
            <Version>3.0.23_p3</Version>
            <Comment>Install mount.cifs helpers in /usr/bin</Comment>
            <Name>Ekin Meroğlu</Name>
            <Email>ekin@pardus.org.tr</Email>
        </Update>
        <Update release="12">
            <Date>2006-10-09</Date>
            <Version>3.0.23_p3</Version>
            <Comment>Service script updated.</Comment>
            <Name>Bahadır Kandemir</Name>
            <Email>bahadir@pardus.org.tr</Email>
        </Update>
        <Update release="11">
            <Date>2006-09-09</Date>
            <Version>3.0.23_p3</Version>
            <Comment>Version bump</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="10">
            <Date>2006-07-11</Date>
            <Version>3.0.23</Version>
            <Comment>LDAP support</Comment>
            <Name>Ali Erdinç Köroğlu</Name>
            <Email>erdinc@pardus.org.tr</Email>
        </Update>
        <Update release="9" type="security">
            <Date>2006-07-11</Date>
            <Version>3.0.23</Version>
            <Comment>Version bump to fix CAN-2006-3403</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="8">
            <Date>2006-05-07</Date>
            <Version>3.0.22</Version>
            <Comment>Added müdür script</Comment>
            <Name>Onur Küçük</Name>
            <Email>onur@pardus.org.tr</Email>
        </Update>
        <Update release="7" type="security">
            <Date>2006-03-30</Date>
            <Version>3.0.22</Version>
            <Comment>Version bump to fix CAN-2006-1059</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="6">
            <Date>2006-03-02</Date>
            <Version>3.0.21c</Version>
            <Comment>Stable update</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="5">
            <Date>2006-02-04</Date>
            <Version>3.0.21b</Version>
            <Comment>fix #1712</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="4">
            <Date>2006-02-02</Date>
            <Version>3.0.21b</Version>
            <Comment>New stable release, and enable Kerberos support</Comment>
            <Name>İsmail Dönmez</Name>
            <Email>ismail@pardus.org.tr</Email>
        </Update>
        <Update release="3">
            <Date>2006-01-25</Date>
            <Version>3.0.20b</Version>
            <Comment>Fix printing with remote SMB systems, bugfix from Muazzez Mirasedoğlu</Comment>
            <Name>Onur Küçük</Name>
            <Email>onur@pardus.org.tr</Email>
        </Update>
        <Update release="2">
            <Date>2005-12-15</Date>
            <Version>3.0.20b</Version>
            <Comment>Default smb.conf powered by Doruk Fişek (#1166)</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
        <Update release="1">
            <Date>2005-11-28</Date>
            <Version>3.0.20b</Version>
            <Comment>First release.</Comment>
            <Name>S.Çağlar Onur</Name>
            <Email>caglar@pardus.org.tr</Email>
        </Update>
    </History>
</PISI>
