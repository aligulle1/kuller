diff -Nur qemu-0.12.4-old/vl.c qemu-0.12.4/vl.c
--- qemu-0.12.4-old/vl.c	2011-07-17 17:05:08.739539041 +0300
+++ qemu-0.12.4/vl.c	2011-07-17 17:08:07.824666474 +0300
@@ -35,6 +35,7 @@
 #ifndef _WIN32
 #include <libgen.h>
 #include <pwd.h>
+#include <grp.h>
 #include <sys/times.h>
 #include <sys/wait.h>
 #include <termios.h>
@@ -6117,6 +6118,11 @@
             fprintf(stderr, "Failed to setgid(%d)\n", pwd->pw_gid);
             exit(1);
         }
+        if (initgroups(pwd->pw_name, pwd->pw_gid) < 0) {
+            fprintf(stderr, "Failed to initgroups(\"%s\", %d)\n",
+            pwd->pw_name, pwd->pw_gid);
+            exit(1);
+        }
         if (setuid(pwd->pw_uid) < 0) {
             fprintf(stderr, "Failed to setuid(%d)\n", pwd->pw_uid);
             exit(1);
