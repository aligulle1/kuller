--- branches/KDE/4.3/kdepimlibs/kioslave/imap4/imapparser.cpp	2009/06/24 10:17:04	986143
+++ branches/KDE/4.3/kdepimlibs/kioslave/imap4/imapparser.cpp	2010/01/13 15:59:17	1074179
@@ -262,13 +262,12 @@
   }
   cmd = sendCommand (CommandPtr(new imapCommand ("AUTHENTICATE", firstCommand.toLatin1())));
 
-  while ( true )
-  {
+  int pl = 0;
+  while ( pl != -1 && !cmd->isComplete () ) {
     //read the next line
-    while (parseLoop() == 0) {
+    while ( ( pl = parseLoop() ) == 0) {
       ;
     }
-    if ( cmd->isComplete() ) break;
 
     if (!continuation.isEmpty())
     {
