Patch for bug #603081: failure to guard against bogus SamplesPerPixel
when converting a YCbCr image to RGB.

Filed upstream at http://bugzilla.maptools.org/show_bug.cgi?id=2216

diff -Naurp tiff-3.9.1/libtiff/tif_getimage.c tiff-3.9.1.oden/libtiff/tif_getimage.c
--- tiff-3.9.1/libtiff/tif_getimage.c	2010-08-05 10:24:05.000000000 -0400
+++ tiff-3.9.1.oden/libtiff/tif_getimage.c	2010-08-05 10:29:03.000000000 -0400
@@ -2397,7 +2397,7 @@ PickContigCase(TIFFRGBAImage* img)
 			}
 			break;
 		case PHOTOMETRIC_YCBCR:
-			if (img->bitspersample == 8)
+			if ((img->bitspersample==8) && (img->samplesperpixel==3))
 			{
 				if (initYCbCrConversion(img)!=0)
 				{
